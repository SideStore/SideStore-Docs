---
title: 自定义Anisette服务器
description: 关于anisette服务器的指南
---

:::note
使用任何在0.4.0以后版本的SideStore不太可能导致您的帐户被锁定，因为此时我们添加了对v3 anisette服务器的支持。

因此，如果您的版本支持，**强烈建议**使用v3服务器以正常使用SideStore。
:::

Anisette数据是在每次安装或刷新应用程序时，进行应用程序签名过程中所使用到的信息。SideStore从一个模拟的Mac的服务器中获取此信息，并将Anisette数据发回给您。在此过程中，任何的帐户信息都不会发送到服务器。

当很多人使用同一台Anisette服务器（尤其是v1服务器）的时候，它会触发苹果的安全机制，并锁定使用该机器的帐户。这就是为什么我们建议使用单独的临时Apple ID而不是您的主ID。

我们的团队一直在研究更好的方法来避免帐户的锁定（以_anisette-v3_的形式）。但如果您使用的是旧版本的SideStore，那么部署您自己的Anisette服务器是避免锁定帐户的好方法。得益于我们当前的服务器是开源的，且专为 Docker 环境设计，这使得操作变得异常简单。这意味着我们可以仅通过一个GitHub链接来部署服务器。

## 在Render上部署

[Render](https://render.com/) 是一个提供轻松创建服务器的服务。它支持从GitHub加载服务器源代码。虽然免费版提供的资源非常有限，但服务器可以在上面舒适地运行，且不会出现问题。（仅供参考————它确实需要信用卡/借记卡以进行身份验证，但它完全免费）

由于太多人使用同一个GitHub链接，您需要亲自fork Git库。

1. 如果您没有Github账户，请[注册](https://github.com/signup)一个GitHub账户。
2. [打开](https://github.com/Dadoum/anisette-v3-server)Git库。
3. 点击右上角的“fork”，将库fork到您的帐户。
4. 一旦fork的库建立完毕，点击右上角绿色的“code”下拉菜单，复制.git链接。

* 稍后会用到这个链接，请好好保留。

完成以上操作后，您就可以创建Render服务器了。

1. [注册](https://dashboard.render.com/register/)一个账户。
2. 创建一个[新的Web服务](https://dashboard.render.com/select-repo?type=web).
3. 下滑到**Public Git repository**，并输入您前面复制的链接。
4. 点击"Continue"并填写表格:
    * **Name** - 名字，"不会造成任何影响"
    * **Region** - 选择距离您最近的地区
    * **Branch** - main (默认)
    * **Root Directory** - blank (默认)
    * **Environment** - Docker (默认)
    * **Instance Type** - Free

5. 等待服务器构建。完成后，您将看到以下内容：

```
Machine requires provisioning... done !
Your service is live 🎉
```

*如果构建因任何原因失败，请单击**Manual Deploy**，然后**Deploy latest commit**。*

6. 在页面顶部找到新服务器的链接:

```
https://[your-server-name].onrender.com
```

## 创建自定义anisette服务器列表

自0.5.8版本发布以来，SideStore使用了anisette服务器列表系统，因此您可以更容易地添加官方认可的anisette服务器。这意味着，要使用自己的服务器，同时不要求将您的服务器添加到官方列表中，还需要做一些额外的工作。

如果您想保留使用列表提供的服务器的选项，请按照以下步骤操作：
1. 点击[这里](https://servers.sidestore.io/servers.json)以获取当前的服务器列表。
2. 请前往您选择的文件托管服务，将文件托管到互联网上。我们建议使用GitHub Pages，因为它更容易在未来进行编辑，并且本指南也将按照Github Pages的操作作为参考。如果您有自己的托管方式，请根据您的设置调整以下内容。
3. 如果您已经设置了Github Pages网站，请跳到第六个子步骤。否则，请执行以下操作：
* 通过桌面端右上角的加号（+）按钮，或者移动端的个人资料图标 > Create new，或者[这个页面](https://github.com/new)以添加新的GitHub存储库。
* 将名称设置为[您的GitHub用户名].GitHub.io，选中'Initialize this repository with a README'，并将其余设置设置为您所希望的方式。
* 创建后，转到“Settings”选项卡，导航到“Code and automation”下的“Pages”部分。
* 将Build and deployment下的Source切换成'Deploy from branch'
* 如果没有自动选择的话，将Branch切换到'main'
* 返回代码选项卡，点击'Add files'，然后点击'Upload files'，再选择您之前下载的'servers.json'文件。   
* 上传后，单击文件并点击编辑(Edit)按钮。
* 向下滚动到列表中的最后一个服务器，并在最后一个服务器的结束花括号（'}'）后添加逗号，然后按照以下格式添加您自己的服务器：
```
{
    "name": "[一些可识别的东西，比如说用户名]",   //除非你与其他人共享此服务器列表，否则这并不重要
    "address": "[您的服务器链接]"
}
```
*提交更改，然后前往https://[您的GitHub用户名].GitHub.io/[您放置文件的位置]/servers.json。如果文件成功加载了，那么您就可以继续下一节了。否则，您可能需要等待10分钟才能正确设置您的网站，然后再试一次。

如果您只想使用自己的服务器，请按照上述步骤操作，但不要复制官方servers.json，而是使用此格式创建自己的服务器；
```
{
    "servers": [
        {
            "name": "[同上]",
            "address": "[同上]"
        }
    ]
}
```
并继续进行。

## 通过SideStore使用您的服务器

要在SideStore应用程序中使用新创建的服务器列表，请执行以下操作： 

1. 打开SideStore中的“设置”选项卡。
2. 向下滚动到底部，然后点击“Anisette服务器”。
3. 点击输入框中的链接，并将其替换为您的服务器列表的链接。
4. 点击“刷新服务器”，然后从更新的列表中选择您自己的服务器。

## 完毕！

SideStore将会使用您的新自定义anisette服务器。
